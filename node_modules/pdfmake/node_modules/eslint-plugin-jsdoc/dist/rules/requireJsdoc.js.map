{"version":3,"sources":["../../src/rules/requireJsdoc.js"],"names":["OPTIONS_SCHEMA","additionalProperties","properties","require","default","ArrowFunctionExpression","type","ClassDeclaration","FunctionDeclaration","FunctionExpression","MethodDefinition","getOption","context","key","options","length","hasOwnProperty","getOptions","meta","doc","category","description","recommended","url","messages","missingJsDoc","schema","returns","sourceCode","checkJsDoc","node","jsDocNode","getJSDocComment","exemptEmptyFunctions","Boolean","_","get","functionParameterNames","jsdocUtils","getFunctionParameterNames","hasReturnValue","report","messageId","parent","value"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,cAAc,GAAG;AACrBC,EAAAA,oBAAoB,EAAE,KADD;AAErBC,EAAAA,UAAU,EAAE;AACVC,IAAAA,OAAO,EAAE;AACPF,MAAAA,oBAAoB,EAAE,KADf;AAEPG,MAAAA,OAAO,EAAE,EAFF;AAGPF,MAAAA,UAAU,EAAE;AACVG,QAAAA,uBAAuB,EAAE;AACvBD,UAAAA,OAAO,EAAE,KADc;AAEvBE,UAAAA,IAAI,EAAE;AAFiB,SADf;AAKVC,QAAAA,gBAAgB,EAAE;AAChBH,UAAAA,OAAO,EAAE,KADO;AAEhBE,UAAAA,IAAI,EAAE;AAFU,SALR;AASVE,QAAAA,mBAAmB,EAAE;AACnBJ,UAAAA,OAAO,EAAE,IADU;AAEnBE,UAAAA,IAAI,EAAE;AAFa,SATX;AAaVG,QAAAA,kBAAkB,EAAE;AAClBL,UAAAA,OAAO,EAAE,KADS;AAElBE,UAAAA,IAAI,EAAE;AAFY,SAbV;AAiBVI,QAAAA,gBAAgB,EAAE;AAChBN,UAAAA,OAAO,EAAE,KADO;AAEhBE,UAAAA,IAAI,EAAE;AAFU;AAjBR,OAHL;AAyBPA,MAAAA,IAAI,EAAE;AAzBC;AADC,GAFS;AA+BrBA,EAAAA,IAAI,EAAE;AA/Be,CAAvB;;AAkCA,MAAMK,SAAS,GAAG,CAACC,OAAD,EAAUC,GAAV,KAAkB;AAClC,MAAI,CAACD,OAAO,CAACE,OAAR,CAAgBC,MAArB,EAA6B;AAC3B,WAAOf,cAAc,CAACE,UAAf,CAA0BC,OAA1B,CAAkCD,UAAlC,CAA6CW,GAA7C,EAAkDT,OAAzD;AACD;;AAED,MAAI,CAACQ,OAAO,CAACE,OAAR,CAAgB,CAAhB,CAAD,IAAuB,CAACF,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBX,OAA/C,EAAwD;AACtD,WAAOH,cAAc,CAACE,UAAf,CAA0BC,OAA1B,CAAkCD,UAAlC,CAA6CW,GAA7C,EAAkDT,OAAzD;AACD;;AAED,MAAI,CAACQ,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBX,OAAnB,CAA2Ba,cAA3B,CAA0CH,GAA1C,CAAL,EAAqD;AACnD,WAAOb,cAAc,CAACE,UAAf,CAA0BC,OAA1B,CAAkCD,UAAlC,CAA6CW,GAA7C,EAAkDT,OAAzD;AACD;;AAED,SAAOQ,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBX,OAAnB,CAA2BU,GAA3B,CAAP;AACD,CAdD;;AAgBA,MAAMI,UAAU,GAAIL,OAAD,IAAa;AAC9B,SAAO;AACLP,IAAAA,uBAAuB,EAAEM,SAAS,CAACC,OAAD,EAAU,yBAAV,CAD7B;AAELL,IAAAA,gBAAgB,EAAEI,SAAS,CAACC,OAAD,EAAU,kBAAV,CAFtB;AAGLJ,IAAAA,mBAAmB,EAAEG,SAAS,CAACC,OAAD,EAAU,qBAAV,CAHzB;AAILH,IAAAA,kBAAkB,EAAEE,SAAS,CAACC,OAAD,EAAU,oBAAV,CAJxB;AAKLF,IAAAA,gBAAgB,EAAEC,SAAS,CAACC,OAAD,EAAU,kBAAV;AALtB,GAAP;AAOD,CARD;;eAUe,2BAAa,IAAb,EAAmB;AAChCM,EAAAA,IAAI,EAAE;AACJC,IAAAA,GAAG,EAAE;AACHC,MAAAA,QAAQ,EAAE,kBADP;AAEHC,MAAAA,WAAW,EAAE,wBAFV;AAGHC,MAAAA,WAAW,EAAE,MAHV;AAIHC,MAAAA,GAAG,EAAE;AAJF,KADD;AAQJC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,YAAY,EAAE;AADN,KARN;AAYJC,IAAAA,MAAM,EAAE,CACN1B,cADM,CAZJ;AAgBJM,IAAAA,IAAI,EAAE;AAhBF,GAD0B;;AAmBhCqB,EAAAA,OAAO,CAAEf,OAAF,EAAWgB,UAAX,EAAuB;AAC5B,UAAMC,UAAU,GAAIC,IAAD,IAAU;AAC3B,YAAMC,SAAS,GAAGH,UAAU,CAACI,eAAX,CAA2BF,IAA3B,CAAlB;;AAEA,UAAIC,SAAJ,EAAe;AACb;AACD;;AAED,YAAME,oBAAoB,GAAGC,OAAO,CAACC,gBAAEC,GAAF,CAAMxB,OAAN,EAAe,qCAAf,CAAD,CAApC;;AACA,UAAIqB,oBAAJ,EAA0B;AACxB,cAAMI,sBAAsB,GAAGC,oBAAWC,yBAAX,CAAqCT,IAArC,CAA/B;;AACA,YAAI,CAACO,sBAAsB,CAACtB,MAAxB,IAAkC,CAACuB,oBAAWE,cAAX,CAA0BV,IAA1B,EAAgClB,OAAhC,CAAvC,EAAiF;AAC/E;AACD;AACF;;AAEDA,MAAAA,OAAO,CAAC6B,MAAR,CAAe;AACbC,QAAAA,SAAS,EAAE,cADE;AAEbZ,QAAAA;AAFa,OAAf;AAID,KAnBD;;AAqBA,UAAMhB,OAAO,GAAGG,UAAU,CAACL,OAAD,CAA1B;AAEA,WAAO;AACLP,MAAAA,uBAAuB,CAAEyB,IAAF,EAAQ;AAC7B,YAAI,CAAChB,OAAO,CAACT,uBAAb,EAAsC;AACpC;AACD;;AAED,YAAIyB,IAAI,CAACa,MAAL,CAAYrC,IAAZ,KAAqB,oBAAzB,EAA+C;AAC7C;AACD;;AAEDuB,QAAAA,UAAU,CAACC,IAAD,CAAV;AACD,OAXI;;AAaLvB,MAAAA,gBAAgB,CAAEuB,IAAF,EAAQ;AACtB,YAAI,CAAChB,OAAO,CAACP,gBAAb,EAA+B;AAC7B;AACD;;AAEDsB,QAAAA,UAAU,CAACC,IAAD,CAAV;AACD,OAnBI;;AAqBLtB,MAAAA,mBAAmB,CAAEsB,IAAF,EAAQ;AACzB,YAAI,CAAChB,OAAO,CAACN,mBAAb,EAAkC;AAChC;AACD;;AAEDqB,QAAAA,UAAU,CAACC,IAAD,CAAV;AACD,OA3BI;;AA6BLrB,MAAAA,kBAAkB,CAAEqB,IAAF,EAAQ;AACxB,YAAIhB,OAAO,CAACJ,gBAAR,IAA4BoB,IAAI,CAACa,MAAL,CAAYrC,IAAZ,KAAqB,kBAArD,EAAyE;AACvEuB,UAAAA,UAAU,CAACC,IAAD,CAAV;AAEA;AACD;;AAED,YAAI,CAAChB,OAAO,CAACL,kBAAb,EAAiC;AAC/B;AACD;;AAED,YAAIqB,IAAI,CAACa,MAAL,CAAYrC,IAAZ,KAAqB,oBAAzB,EAA+C;AAC7CuB,UAAAA,UAAU,CAACC,IAAD,CAAV;AACD;;AAED,YAAIA,IAAI,CAACa,MAAL,CAAYrC,IAAZ,KAAqB,UAArB,IAAmCwB,IAAI,KAAKA,IAAI,CAACa,MAAL,CAAYC,KAA5D,EAAmE;AACjEf,UAAAA,UAAU,CAACC,IAAD,CAAV;AACD;AACF;;AA/CI,KAAP;AAiDD;;AA5F+B,CAAnB,C","sourcesContent":["import _ from 'lodash';\nimport iterateJsdoc from '../iterateJsdoc';\nimport jsdocUtils from '../jsdocUtils';\n\nconst OPTIONS_SCHEMA = {\n  additionalProperties: false,\n  properties: {\n    require: {\n      additionalProperties: false,\n      default: {},\n      properties: {\n        ArrowFunctionExpression: {\n          default: false,\n          type: 'boolean'\n        },\n        ClassDeclaration: {\n          default: false,\n          type: 'boolean'\n        },\n        FunctionDeclaration: {\n          default: true,\n          type: 'boolean'\n        },\n        FunctionExpression: {\n          default: false,\n          type: 'boolean'\n        },\n        MethodDefinition: {\n          default: false,\n          type: 'boolean'\n        }\n      },\n      type: 'object'\n    }\n  },\n  type: 'object'\n};\n\nconst getOption = (context, key) => {\n  if (!context.options.length) {\n    return OPTIONS_SCHEMA.properties.require.properties[key].default;\n  }\n\n  if (!context.options[0] || !context.options[0].require) {\n    return OPTIONS_SCHEMA.properties.require.properties[key].default;\n  }\n\n  if (!context.options[0].require.hasOwnProperty(key)) {\n    return OPTIONS_SCHEMA.properties.require.properties[key].default;\n  }\n\n  return context.options[0].require[key];\n};\n\nconst getOptions = (context) => {\n  return {\n    ArrowFunctionExpression: getOption(context, 'ArrowFunctionExpression'),\n    ClassDeclaration: getOption(context, 'ClassDeclaration'),\n    FunctionDeclaration: getOption(context, 'FunctionDeclaration'),\n    FunctionExpression: getOption(context, 'FunctionExpression'),\n    MethodDefinition: getOption(context, 'MethodDefinition')\n  };\n};\n\nexport default iterateJsdoc(null, {\n  meta: {\n    doc: {\n      category: 'Stylistic Issues',\n      description: 'Require JSDoc comments',\n      recommended: 'true',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc'\n    },\n\n    messages: {\n      missingJsDoc: 'Missing JSDoc comment.'\n    },\n\n    schema: [\n      OPTIONS_SCHEMA\n    ],\n\n    type: 'suggestion'\n  },\n  returns (context, sourceCode) {\n    const checkJsDoc = (node) => {\n      const jsDocNode = sourceCode.getJSDocComment(node);\n\n      if (jsDocNode) {\n        return;\n      }\n\n      const exemptEmptyFunctions = Boolean(_.get(context, 'settings.jsdoc.exemptEmptyFunctions'));\n      if (exemptEmptyFunctions) {\n        const functionParameterNames = jsdocUtils.getFunctionParameterNames(node);\n        if (!functionParameterNames.length && !jsdocUtils.hasReturnValue(node, context)) {\n          return;\n        }\n      }\n\n      context.report({\n        messageId: 'missingJsDoc',\n        node\n      });\n    };\n\n    const options = getOptions(context);\n\n    return {\n      ArrowFunctionExpression (node) {\n        if (!options.ArrowFunctionExpression) {\n          return;\n        }\n\n        if (node.parent.type !== 'VariableDeclarator') {\n          return;\n        }\n\n        checkJsDoc(node);\n      },\n\n      ClassDeclaration (node) {\n        if (!options.ClassDeclaration) {\n          return;\n        }\n\n        checkJsDoc(node);\n      },\n\n      FunctionDeclaration (node) {\n        if (!options.FunctionDeclaration) {\n          return;\n        }\n\n        checkJsDoc(node);\n      },\n\n      FunctionExpression (node) {\n        if (options.MethodDefinition && node.parent.type === 'MethodDefinition') {\n          checkJsDoc(node);\n\n          return;\n        }\n\n        if (!options.FunctionExpression) {\n          return;\n        }\n\n        if (node.parent.type === 'VariableDeclarator') {\n          checkJsDoc(node);\n        }\n\n        if (node.parent.type === 'Property' && node === node.parent.value) {\n          checkJsDoc(node);\n        }\n      }\n    };\n  }\n});\n"],"file":"requireJsdoc.js"}